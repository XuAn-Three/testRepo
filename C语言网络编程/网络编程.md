## 网络编程

网络的通信，需要先创建套接字。

### 套接字

套接字，相当于一个“网络插座”，通过网络进行通信。通过这个“插座”收发信息，就像电话机的插槽。

### 端口

创建服务器时，还需要指定一个端口号。

一台服务器，同时对外提供多种服务的时候，比如Web服务、远程登录服务等等，就需要使用端口号，对不同的服务进行区别。每个服务，都有自己唯一的端口号。

### 执行WEB服务前的准备工作

- 网络通信初始化
- 创建套接字
- 设置套接字属性，端口可复用
- 绑定套接字和网络地址
- 动态分配端口号
- 创建监听队列



### 浏览器访问网站的流程

1、浏览器发送网页访问请求：发送 GET 请求包。

2、服务器接收请求包，发送相应包，被请求的网页。

3、浏览器根据收到的网页内容，再次发送 GET 请求包。申请获取网页中的图片、JS、CSS等文件。

4、服务器发响应包，发送请求的资源。

5、用户在网页中填写数据，点击提交，发送 POST 请求。

6、服务器接收请求后，将POST交给 CGI 处理。

7、CGI 向服务器发送处理结果。

8、服务器向浏览器发送 POST 请求的响应包。



### 多线程

可能会有多个用户同时发起请求，为了更快处理网页请求，就需要使用多线程技术。



服务器收到浏览器的青丘狐，accept 函数会返回一个 客户端套接字，这个套接字对应了这个浏览器客户端。

以后服务器就可以通过这个 客户端套接字 和对应的浏览器进行通信。

这个时候，服务器就有两种套接字。

1、服务器端的套接字

2、客户端的套接字



### CGI

公共网关接口（Common Gateway Interface）

是 Web 服务器运行时外部程序的规范，按 CGI 编写的程序可以扩展服务器功能。

CGI 处理步骤

1、通过 Internet 把用户请求送到 web 服务器

2、 web 服务器接收用户的请求，交给 CGI 程序处理

3、CGI 程序把处理结果传送给 web 服务器

4、 web 服务器把结果送回到用户